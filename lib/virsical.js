!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o=n();for(var t in o)("object"==typeof exports?exports:e)[t]=o[t]}}(this,function(){return function(e){function n(t){if(o[t])return o[t].exports;var i=o[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var o={};return n.m=e,n.c=o,n.p="",n(0)}([function(e,n,o){"use strict";function t(){f(),_&&_()}Object.defineProperty(n,"__esModule",{value:!0});var i=o(2).QWebChannel,r=!1,c=0,a=1,s=2,d=3,l=4,f=function(){return sessionStorage.setItem("configStatus",!0)},u=function(){return!0},p=function(e,n){try{new i(qt.webChannelTransport,function(o){var t=o.objects.content;t.clickConfig(e,n)})}catch(e){throw new Error(e)}},v=function(){var e=navigator.userAgent;return r&&console.log("Virsical: ",e),e.indexOf("Android")>-1||e.indexOf("Adr")>-1?a:e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?s:e.match(/Mac OS X/)?d:e.indexOf("QtWebEngine")>-1?l:c},w=function(e){r=e.debug;var n=v();if(n==a)try{window.control?window.control.config(e.debug,e.client_id,e.client_secret):window.location.href="vsk3browser://config?debug="+e.debug+"&clientid="+e.client_id+"&clientsecret="+e.client_secret}catch(e){throw new Error(e)}else if(n==s||n==d)window.location.href="vsk3browser://config?debug="+e.debug+"&clientid="+e.client_id+"&clientsecret="+e.client_secret;else{if(n!=l)throw new Error("Device validation failed, only support for mobile devices");p(e.client_id,e.client_secret)}},_=void 0,g=function(e){return _=e},h=void 0,b=function(e){return h=e},y=function(e,n){return h&&h({msg:e,code:n})},m=void 0,j=void 0,x=void 0,S=function(e){if(!u())return window.console.error("no config, please using Virsical.config(...) to config your app."),void alert("Please config app first");j=e.success,x=e.fail;var n=v();if(n==a)try{window.control?window.control.login():window.location.href="vsk3browser://login"}catch(e){throw new Error(e)}else n==s||n==d?window.location.href="vsk3browser://login":n==l&&new i(qt.webChannelTransport,function(e){var n=e.objects.content;n.login()})},k=function(e,n,o,t){clearTimeout(m),0==e?j&&j({info:n}):x&&x({msg:t,code:o})},C=void 0,O=function(e){return u()?(C=e.successCallback,void(v()==a?window.image.selectOne():v()==s)):void alert("Please config app first")},P=function(e){return C({localIds:e})},E=function(e){return u()?void(v()==a?window.image.show(e.ids):v()==s):void alert("Please config app first")},U=void 0,I=6e4,Q=void 0,T=void 0,R=function(e){return u()?(U=setTimeout("locationTimeout()",I),Q=e.success,T=e.fail,void(v()==a?window.map.location():v()==s)):void alert("Please config app first")},A=function(e,n,o,t,i,r){clearTimeout(U),0==e?Q({addr:n,lat:o,lng:t}):T({msg:r,code:i})},M=void 0,N=void 0,q=function(e){if(!u())return void alert("Please config app first");M=e.success,N=e.fail;var n=v();n==a?window.captureqr?window.captureqr.scan():window.location.href="vsk3browser://captureqr":n!=s&&n!=d||(window.location.href="vsk3browser://captureqr")},B=function(e,n,o,t){0==e?M({url:n}):N({msg:t,code:o})},V=function(e){return V=e},J=function(e){V&&V(e)},W=function(e){var n=v();n==s&&(e?window.location.href="vsk3browser://html5?action=hideBack":window.location.href="vsk3browser://html5?action=showBack")},X=void 0,F=void 0,L=function(e){return u()?(X=e.success,F=e.fail,void(v()==a?window.contacts.loadPhoneContacts(e.refresh):v()==s&&(window.location.href="vsk3browser://loadPhoneContacts?refresh="+e.refresh))):void alert("Please config app first")},D=function(e,n,o,t){0==e?X({result:n}):F({msg:t,code:o})},G=function(e){var n=v();(e||""==e)&&(n!=s&&n!=d||(window.location.href="vsk3browser://updateTitle?title="+e))};window.configReady=t,window.configError=y,window.loginResult=k,window.imageResult=P,window.locationResult=A,window.captureQRResult=B,window.phoneContactsResult=D,window.sendMessage=J,window.setIOSTitle=G;var H={config:w,ready:g,login:S,error:b,captureQR:q,selectImage:O,previewImage:E,location:R,messageCallback:V,phoneContacts:L,setBackButtonHidden4iOS:W,setIOSTitle:G};window.Virsical=H,n.default=H},,function(e,n,o){(function(e){"use strict";function n(e,o,i){function r(e,n){var o=e[0],r=e[1];d[o]={connect:function(e){return"function"!=typeof e?void console.error("Bad callback given to connect to signal "+o):(d.__objectSignals__[r]=d.__objectSignals__[r]||[],d.__objectSignals__[r].push(e),void(n||"destroyed"===o||i.exec({type:t.connectToSignal,object:d.__id__,signal:r})))},disconnect:function(e){if("function"!=typeof e)return void console.error("Bad callback given to disconnect from signal "+o);d.__objectSignals__[r]=d.__objectSignals__[r]||[];var c=d.__objectSignals__[r].indexOf(e);return c===-1?void console.error("Cannot find connection of signal "+o+" to "+e.name):(d.__objectSignals__[r].splice(c,1),void(n||0!==d.__objectSignals__[r].length||i.exec({type:t.disconnectFromSignal,object:d.__id__,signal:r})))}}}function c(e,n){var o=d.__objectSignals__[e];o&&o.forEach(function(e){e.apply(e,n)})}function a(e){var n=e[0],o=e[1];d[n]=function(){for(var e,n=[],r=0;r<arguments.length;++r)"function"==typeof arguments[r]?e=arguments[r]:n.push(arguments[r]);i.exec({type:t.invokeMethod,object:d.__id__,method:o,args:n},function(n){if(void 0!==n){var o=d.unwrapQObject(n);e&&e(o)}})}}function s(e){var n=e[0],o=e[1],c=e[2];d.__propertyCache__[n]=e[3],c&&(1===c[0]&&(c[0]=o+"Changed"),r(c,!0)),Object.defineProperty(d,o,{configurable:!0,get:function(){var e=d.__propertyCache__[n];return void 0===e&&console.warn('Undefined value in property cache for property "'+o+'" in object '+d.__id__),e},set:function(e){return void 0===e?void console.warn("Property setter for "+o+" called with undefined value!"):(d.__propertyCache__[n]=e,void i.exec({type:t.setProperty,object:d.__id__,property:n,value:e}))}})}this.__id__=e,i.objects[e]=this,this.__objectSignals__={},this.__propertyCache__={};var d=this;this.unwrapQObject=function(e){if(e instanceof Array){for(var o=new Array(e.length),t=0;t<e.length;++t)o[t]=d.unwrapQObject(e[t]);return o}if(!e||!e["__QObject*__"]||void 0===e.id)return e;var r=e.id;if(i.objects[r])return i.objects[r];if(!e.data)return void console.error("Cannot unwrap unknown QObject "+r+" without data.");var c=new n(r,e.data,i);return c.destroyed.connect(function(){if(i.objects[r]===c){delete i.objects[r];var e=[];for(var n in c)e.push(n);for(var o in e)delete c[e[o]]}}),c.unwrapProperties(),c},this.unwrapProperties=function(){for(var e in d.__propertyCache__)d.__propertyCache__[e]=d.unwrapQObject(d.__propertyCache__[e])},this.propertyUpdate=function(e,n){for(var o in n){var t=n[o];d.__propertyCache__[o]=t}for(var i in e)c(i,e[i])},this.signalEmitted=function(e,n){c(e,n)},o.methods.forEach(a),o.properties.forEach(s),o.signals.forEach(function(e){r(e,!1)});for(var e in o.enums)d[e]=o.enums[e]}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t={signal:1,propertyUpdate:2,init:3,idle:4,debug:5,invokeMethod:6,connectToSignal:7,disconnectFromSignal:8,setProperty:9,response:10},i=function(e,i){if("object"!==("undefined"==typeof e?"undefined":o(e))||"function"!=typeof e.send)return void console.error("The QWebChannel expects a transport object with a send function and onmessage callback property. Given is: transport: "+("undefined"==typeof e?"undefined":o(e))+", transport.send: "+o(e.send));var r=this;this.transport=e,this.send=function(e){"string"!=typeof e&&(e=JSON.stringify(e)),r.transport.send(e)},this.transport.onmessage=function(e){var n=e.data;switch("string"==typeof n&&(n=JSON.parse(n)),n.type){case t.signal:r.handleSignal(n);break;case t.response:r.handleResponse(n);break;case t.propertyUpdate:r.handlePropertyUpdate(n);break;default:console.error("invalid message received:",e.data)}},this.execCallbacks={},this.execId=0,this.exec=function(e,n){return n?(r.execId===Number.MAX_VALUE&&(r.execId=Number.MIN_VALUE),e.hasOwnProperty("id")?void console.error("Cannot exec message with property id: "+JSON.stringify(e)):(e.id=r.execId++,r.execCallbacks[e.id]=n,void r.send(e))):void r.send(e)},this.objects={},this.handleSignal=function(e){var n=r.objects[e.object];n?n.signalEmitted(e.signal,e.args):console.warn("Unhandled signal: "+e.object+"::"+e.signal)},this.handleResponse=function(e){return e.hasOwnProperty("id")?(r.execCallbacks[e.id](e.data),void delete r.execCallbacks[e.id]):void console.error("Invalid response message received: ",JSON.stringify(e))},this.handlePropertyUpdate=function(e){for(var n in e.data){var o=e.data[n],i=r.objects[o.object];i?i.propertyUpdate(o.signals,o.properties):console.warn("Unhandled property update: "+o.object+"::"+o.signal)}r.exec({type:t.idle})},this.debug=function(e){r.send({type:t.debug,data:e})},r.exec({type:t.init},function(e){for(var o in e)var c=new n(o,e[o],r);for(var o in r.objects)r.objects[o].unwrapProperties();i&&i(r),r.exec({type:t.idle})})};"object"===o(e)&&(e.exports={QWebChannel:i})}).call(n,o(3)(e))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});